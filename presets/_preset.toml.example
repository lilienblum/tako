# Preset template example.
# Copy to `presets/<your-preset>.toml` and customize for your runtime.
# Keep this `.example` file out of actual preset references.

# Optional preset identifier used in logs/errors and deploy metadata.
# If omitted, Tako uses the preset file name (without `.toml`).
name = "bun"

# Optional default runtime entrypoint.
# Used when app `tako.toml` omits top-level `main`.
# main = "index.ts"

# Command used by `tako dev`.
# `{main}` (if present) is replaced with resolved app entrypoint.
dev = ["bun", "run", "dev"]

# Command run on the server before starting the app.
# Keep this deterministic (lockfile-aware install is recommended).
install = "bun install --production --frozen-lockfile"

# Production start command on the server.
# `{main}` is replaced with resolved app entrypoint.
start = ["bun", "run", "node_modules/tako.sh/src/wrapper.ts", "{main}"]

[build]
# Exclude patterns use gitignore-style matching relative to workspace root.
# Common exclusions: dependency folders, local caches, source maps.
exclude = ["node_modules/"]

# Build dependency/bootstrap command.
# Runs from workspace root; use `cd "$TAKO_APP_DIR"` for app-local commands.
install = '''
# Install dependencies in workspace root
'''

# Build command that produces runtime output.
# Runs from workspace root; switch to app dir when needed.
build = '''
# Run build command
'''

# Optional target defaults and per-target build overrides.
# Set `build.targets.builder_image` to run builds in Docker.
# Omit it for local builds.
# [build.targets]
# builder_image = "your-image:tag"
#
# Target labels should match server target labels, for example:
# `linux-x86_64-glibc`, `linux-aarch64-musl`.
# [build.targets.linux-x86_64-glibc]
# builder_image = "your-image:tag"
#
# [build.targets.linux-aarch64-musl]
# builder_image = "your-image:tag"
